import{r as t}from"./index-CU3-1K9X.js";import{addToolbarButton as he,PLUGIN_THUMBNAILS as V,PLUGIN_FULLSCREEN as q,createModule as be,MODULE_CONTROLLER as fe,makeUseContext as pe,useLightboxProps as M,IconButton as ge,createIcon as F,createIconDisabled as ve,LightboxPropsProvider as Ee,clsx as w,cssClass as m,composePrefix as ne,useRTL as Te,useEvents as Ce,useLightboxState as oe,useSensors as ye,useKeyboardNavigation as Le,useAnimation as Ne,useEventCallback as le,cleanup as Pe,ACTION_SWIPE as Se,calculatePreload as ke,hasSlides as xe,getSlide as Ie,cssVar as g,CLASS_FLEX_CENTER as D,translateLabel as Re,getSlideKey as we,useDocumentContext as Me,translateSlideCounter as _e,makeComposePrefix as _,ACTION_NEXT as $e,ACTION_PREV as ze,ImageSlide as A,isImageSlide as Ae,ELEMENT_ICON as He}from"./index-LHCchzDk.js";import"./vendor-D7TlRgpv.js";const T={ref:null,position:"bottom",width:120,height:80,border:1,borderRadius:4,padding:4,gap:16,imageFit:"contain",vignette:!0,hidden:!1,showToggle:!1},O=e=>({...T,...e});function ae(){const{thumbnails:e}=M();return O(e)}const C=e=>ne(V,e),u=e=>C(ne("thumbnail",e)),Ue=F("VideoThumbnail",t.createElement("path",{d:"M10 16.5l6-4.5-6-4.5v9zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"})),Ve=F("UnknownThumbnail",t.createElement("path",{d:"M23 18V6c0-1.1-.9-2-2-2H3c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2zM8.5 12.5l2.5 3.01L14.5 11l4.5 6H5l3.5-4.5z"}));function De({slide:e,render:n,rect:l,imageFit:a}){var i;const d=(i=n.thumbnail)===null||i===void 0?void 0:i.call(n,{slide:e,render:n,rect:l,imageFit:a});if(d)return d;const p={render:n,rect:l,imageFit:a};if(e.thumbnail)return t.createElement(A,{slide:{src:e.thumbnail},...p});if(Ae(e))return t.createElement(A,{slide:e,...p});const h=m(u(He));return e.type==="video"?t.createElement(t.Fragment,null,e.poster&&t.createElement(A,{slide:{src:e.poster},...p}),t.createElement(Ue,{className:h})):t.createElement(Ve,{className:h})}const Fe=_("active"),H=_("fadein"),U=_("fadeout"),Oe=_("placeholder"),J="delay",Q="duration";function Be({slide:e,index:n,onClick:l,fadeIn:a,fadeOut:i,placeholder:d,onLoseFocus:p}){const h=t.useRef(null),{render:v,styles:y,labels:s}=M(),{slides:b,globalIndex:$}=oe(),{getOwnerDocument:I}=Me(),{width:N,height:R,imageFit:P}=ae(),S={width:N,height:R},k=n===$,x=le(p);return t.useEffect(()=>{i&&I().activeElement===h.current&&x()},[i,x,I]),t.createElement("button",{ref:h,type:"button",className:w(m(D),m(u()),k&&m(u(Fe())),a&&m(u(H())),i&&m(u(U())),d&&m(u(Oe()))),style:{...a?{[g(u(H(Q)))]:`${a.duration}ms`,[g(u(H(J)))]:`${a.delay}ms`}:null,...i?{[g(u(U(Q)))]:`${i.duration}ms`,[g(u(U(J)))]:`${i.delay}ms`}:null,...y.thumbnail},onClick:l,"aria-current":k?!0:void 0,"aria-label":_e(s,b,n)},e&&De({slide:e,render:v,rect:S,imageFit:P}))}function Z(e){return["top","bottom"].includes(e)}function ee(e,n){return n+2*(e.border+e.padding)+e.gap}function Xe(e){const{thumbnail:n,poster:l}=e||{thumbnail:"placeholder"};return typeof n=="string"&&n||typeof l=="string"&&l||e&&we(e)||void 0}function te({visible:e,containerRef:n}){const l=t.useRef(null),a=Te(),{publish:i,subscribe:d}=Ce(),{carousel:p,styles:h,labels:v}=M(),{slides:y,globalIndex:s,animation:b}=oe(),{registerSensors:$,subscribeSensors:I}=ye();Le(I);const N=ae(),{position:R,width:P,height:S,border:k,borderStyle:x,borderColor:B,borderRadius:X,padding:K,gap:Y,vignette:ie}=N,r=b?.duration!==void 0&&b?.increment||0,j=b?.duration||0,{prepareAnimation:ce}=Ne(l,o=>({keyframes:Z(R)?[{transform:`translateX(${(a?-1:1)*ee(N,P)*r+o}px)`},{transform:"translateX(0)"}]:[{transform:`translateY(${ee(N,S)*r+o}px)`},{transform:"translateY(0)"}],duration:j,easing:b?.easing})),G=le(()=>{let o=0;if(n.current&&l.current){const c=n.current.getBoundingClientRect(),E=l.current.getBoundingClientRect();o=Z(R)?E.left-c.left-(c.width-E.width)/2:E.top-c.top-(c.height-E.height)/2}ce(o)});t.useEffect(()=>Pe(d(Se,G)),[d,G]);const f=ke(p,y),W=[];if(xe(y))for(let o=s-f-Math.abs(r);o<=s+f+Math.abs(r);o+=1){const E=p.finite&&(o<0||o>y.length-1)||r<0&&o<s-f||r>0&&o>s+f?null:Ie(y,o),L=[`${o}`,Xe(E)].filter(Boolean).join("|");W.push({key:L,index:o,slide:E})}const ue=o=>()=>{o>s?i($e,{count:o-s}):o<s&&i(ze,{count:s-o})};return t.createElement("div",{className:w(m(C("container")),m(D)),style:{...e?null:{display:"none"},...P!==T.width?{[g(u("width"))]:`${P}px`}:null,...S!==T.height?{[g(u("height"))]:`${S}px`}:null,...k!==T.border?{[g(u("border"))]:`${k}px`}:null,...x?{[g(u("border_style"))]:x}:null,...B?{[g(u("border_color"))]:B}:null,...X!==T.borderRadius?{[g(u("border_radius"))]:`${X}px`}:null,...K!==T.padding?{[g(u("padding"))]:`${K}px`}:null,...Y!==T.gap?{[g(u("gap"))]:`${Y}px`}:null,...h.thumbnailsContainer}},t.createElement("nav",{ref:l,style:h.thumbnailsTrack,className:w(m(C("track")),m(D)),"aria-label":Re(v,"Thumbnails"),tabIndex:-1,...$},W.map(({key:o,index:c,slide:E})=>{const L=j/Math.abs(r||1),me=r>0&&c>s+f-r&&c<=s+f||r<0&&c<s-f-r&&c>=s-f?{duration:L,delay:((r>0?c-(s+f-r):s-f-r-c)-1)*L}:void 0,de=r>0&&c<s-f||r<0&&c>s+f?{duration:L,delay:(r>0?r-(s-f-c):-r-(c-(s+f)))*L}:void 0;return t.createElement(Be,{key:o,index:c,slide:E,fadeIn:me,fadeOut:de,placeholder:!E,onClick:ue(c),onLoseFocus:()=>{var z;return(z=l.current)===null||z===void 0?void 0:z.focus()}})})),ie&&t.createElement("div",{className:m(C("vignette"))}))}const se=t.createContext(null),Ke=pe("useThumbnails","ThumbnailsContext",se);function Ye({children:e,...n}){const{ref:l,position:a,hidden:i}=O(n.thumbnails),[d,p]=t.useState(!i),h=t.useRef(null),v=t.useMemo(()=>({visible:d,show:()=>p(!0),hide:()=>p(!1)}),[d]);return t.useImperativeHandle(l,()=>v,[v]),t.createElement(Ee,{...n},t.createElement(se.Provider,{value:v},t.createElement("div",{ref:h,className:w(m(C()),m(C(`${a}`)))},["start","top"].includes(a)&&t.createElement(te,{containerRef:h,visible:d}),t.createElement("div",{className:m(C("wrapper"))},e),["end","bottom"].includes(a)&&t.createElement(te,{containerRef:h,visible:d}))))}const re=()=>t.createElement(t.Fragment,null,t.createElement("path",{strokeWidth:2,stroke:"currentColor",strokeLinejoin:"round",fill:"none",d:"M3 5l18 0l0 14l-18 0l0-14z"}),t.createElement("path",{d:"M5 14h4v3h-4zM10 14h4v3h-4zM15 14h4v3h-4z"})),je=F("ThumbnailsVisible",re()),Ge=ve("ThumbnailsHidden",re());function We(){const{visible:e,show:n,hide:l}=Ke(),{render:a}=M();return a.buttonThumbnails?t.createElement(t.Fragment,null,a.buttonThumbnails({visible:e,show:n,hide:l})):t.createElement(ge,{label:e?"Hide thumbnails":"Show thumbnails",icon:e?je:Ge,renderIcon:e?a.iconThumbnailsVisible:a.iconThumbnailsHidden,onClick:e?l:n})}function Ze({augment:e,contains:n,append:l,addParent:a}){e(({thumbnails:d,toolbar:p,...h})=>{const v=O(d);return{toolbar:he(p,V,v.showToggle?t.createElement(We,null):null),thumbnails:v,...h}});const i=be(V,Ye);n(q)?l(q,i):a(fe,i)}export{Ze as default};
